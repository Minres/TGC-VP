#include <stdio.h>
#include "global.h"
#include "platform.h"

/* Default filter input data[Q0.15] is stored in ROM
 * Maximum 80 samples can be processed */
const s16_t FilterInputDefault_as16[FILTER_INPUT_LEN] =
{
    -168, 58, 1594, 2687, 4186, 3284, 6485, 4613, 2943, 1005, 495, -960,
    -1435, -7652, -6145, 216, 8251, 1269, -24, 203, 982, 9, -1132, -1721,
    -1296, 1, 1445, 2136, 245, -3, 157, 0, -1666, -413, 1735, -2, -1770,
    -2512, 12, -3978, 177, 2, 1735, 2413, 1666, 0, -1570, 2136, 2136, 45, 144,
    -78, 1289, -231, -342, -1653, 9861, 231, 1765, 295, 8213, 2951, 45, 782,
    -156, 89, 123, -23, -781, 138, -543, 98, -671, 1329, -451, 398, -28, 127,
    10, 2318,
};

const s16_t FilterOutputDefault_as16[FILTER_INPUT_LEN] =
{
    7, -9, -73, -70, -73, 49, -79, 125, 232, 315, 307, 360, 316, 491, 90,
    -399, -677, -19, 54, 49, 94, 235, 352, 292, 203, -92, -390, -476, -345,
    33, 505, 670, 806, 717, 137, -225, -555, -335, -90, 774, 304, 527, 248, 7,
    -880, -618, -160, 712, 867, 959, 587, 98, -1048, -920, -482, 176, -221,
    823, 901, 519, -443, -176, -349, -293, 284, 794, 619, 209, -237, -318,
    -368, -122, 241, 450, 722, 156, -274, -327, -483, 150,
};

int main(int argc, char **argv) {
    *(uint32_t*)(GPIO_CTRL_ADDR+GPIO_IOF_SEL) &= ~IOF0_UART0_MASK;
    *(uint32_t*)(GPIO_CTRL_ADDR+GPIO_IOF_EN)  |= IOF0_UART0_MASK;
    int error = FirMain_v();
    if (! error)
        puts("PASSED");
    else
        puts("FAILED");
    return error;
}
